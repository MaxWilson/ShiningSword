For a battle, we have several phases:

Populate (from stat blocks or CharSheets)
Declare actions
Execute actions
Apply effects
Show results
Apply ad-hoc effects
Export to CharSheets